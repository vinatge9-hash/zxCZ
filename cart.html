<!--  -->
<!--  -->
<!doctype html>
<html lang="en">
  <head>
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Merriweather:300,400,500,600,700&family=Inter:300,400,500,600,700&display=swap" rel="stylesheet">
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Niyantri Coffee - Cart</title>
    <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@300;700&family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      :root { --coffee-primary: #6f4e37; --coffee-cream: #f8f2e9; }
      body { font-family: 'Inter', sans-serif; }
      h1 { font-family: 'Merriweather', serif; }
    </style>
  </head>
  <body style="font-family: 'Merriweather', sans-serif;" class="min-h-screen bg-cream-100">
    <header class="w-full bg-cover bg-center" style="background-image: linear-gradient(to right, rgba(111,78,55,.95), rgba(111,78,55,.75));">
      <nav class="max-w-full px-4 py-4 flex items-center justify-between text-white">
        <div class="text-xl font-semibold tracking-wide">Niyantri Coffee</div>
        <ul class="flex space-x-6">
          <li><a href="./index.html" class="hover:underline">Home</a></li>
          <li><a href="./menu.html" class="hover:underline">Menu</a></li>
          <li><a href="./cart.html" class="hover:underline">Cart</a></li>
          <li><a href="./checkout.html" class="hover:underline">Checkout</a></li>
          <li><a href="./about.html" class="hover:underline">About</a></li>
          <li><a href="./contact.html" class="hover:underline">Contact</a></li>
        </ul>
      </nav>
    </header>

    <main class="w-full px-6 py-6">
      <h1 class="text-3xl mb-4">Your Cart</h1>
      <section id="cart-list" class="grid grid-cols-1 md:grid-cols-2 gap-4"></section>
      <div class="mt-6 flex justify-between items-center">
        <div class="text-sm text-gray-600">Items in cart are stored locally in your browser.</div>
        <a href="./checkout.html" class="bg-coffee-primary text-white px-4 py-2 rounded">Proceed to Checkout</a>
      </div>
    </main>

    <footer class="w-full py-6 text-center text-sm text-gray-600 bg-gray-100">
      © 2025 Niyantri Coffee. All rights reserved.
    </footer>

    <script>
      function format(n) { return '$' + n.toFixed(2); }
      function renderCart() {
        const cartRaw = localStorage.getItem('nyan_cart');
        const cart = cartRaw ? JSON.parse(cartRaw) : [];
        const section = document.getElementById('cart-list');
        section.innerHTML = '';
        if (cart.length === 0) {
          section.innerHTML = '<p class="text-gray-600">Your cart is empty. Add some delicious drinks from the Menu.</p>';
          return;
        }
        cart.forEach(item => {
          const card = document.createElement('div');
          card.className = 'bg-white rounded-lg p-4 shadow flex items-center justify-between';
          card.innerHTML = `
            <div class="flex items-center gap-4">
              <div class="h-16 w-16 bg-gray-100 flex items-center justify-center" title="${item.name}">${item.image || ''}</div>
              <div>
                <div class="font-semibold">${item.name}</div>
                <div class="text-sm text-gray-600">${item.qty} × ${format(item.price)}</div>
              </div>
            </div>
            <div class="flex items-center gap-2">
              <button class="px-2 py-1 bg-gray-200 rounded" data-id="${item.id}-dec">-</button>
              <span class="px-2">${item.qty}</span>
              <button class="px-2 py-1 bg-gray-200 rounded" data-id="${item.id}-inc">+</button>
              <button class="px-3 py-1 bg-red-500 text-white rounded" data-id="${item.id}-rm">Remove</button>
            </div>
          `;
          section.appendChild(card);
        });
        section.querySelectorAll('button[data-id]').forEach(btn => {
          btn.addEventListener('click', () => {
            const id = btn.getAttribute('data-id');
            const [itemId, action] = id.split('-');
            modifyCart(parseInt(itemId), action);
          });
        });
      }
      function modifyCart(id, action) {
        const cartRaw = localStorage.getItem('nyan_cart');
        let cart = cartRaw ? JSON.parse(cartRaw) : [];
        const idx = cart.findIndex(i => i.id === id);
        if (idx === -1) return;
        if (action === 'inc') cart[idx].qty += 1;
        else if (action === 'dec') cart[idx].qty = Math.max(1, cart[idx].qty - 1);
        else if (action === 'rm') cart.splice(idx, 1);
        localStorage.setItem('nyan_cart', JSON.stringify(cart));
        renderCart();
      }
      (function init(){ renderCart(); })();
    </script>
  </body>
</html>